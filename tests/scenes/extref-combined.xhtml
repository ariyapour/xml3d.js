<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd" >
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>XML3D External References</title>
<link rel="stylesheet" type="text/css" media="all"	href="frame.css"/>
<script type="text/javascript" src="../../build/output/xml3d.js"></script>
</head>
<body style="background-color: #fff;width:500px">

    <xml3d id="xml3dTest" width="320px" height="240px" xmlns="http://www.xml3d.org/2009/xml3d" style="background-color: #ccc">
      <defs>
        <transform id="t_object1" translation="-3 2.5 0"/>
        <data id="simplePlane1">
          <int id="indices" name="index">0 1 2 1 2 3</int>
          <float3 id="positions" name="position">-1.0 -1.0 -10.0 1.0 -1.0 -10.0 -1.0 1.0 -10.0 1.0 1.0 -10.0</float3>
          <float3 name="normal">0.0 0.0 1.0 0.0 0.0 1.0 0.0 0.0 1.0 0.0 0.0 1.0</float3>
          <float2 id="texcoords" name="texcoord">0.0 1.0 1.0 1.0 0.0 0.0 1.0 0.0</float2>
        </data>

        <material id="wood" script="urn:xml3d:material:flat">
          <float3 name="diffuseColor">0 0 0</float3>
        </material>

      </defs>
    <view id="myView" />
    <light id="myLight"/>
    
    <group id="jsonGroup" transform="#t_object1" visible="false">
        <mesh id="myMesh02" type="triangles" src="json/simpleMesh.json"/>
    </group>
    
    <group id="xmlGroup" transform="#t_object1" visible="false">
        <mesh id="myMesh03" src="xml/meshes.xml#simpleMesh"/>
    </group>

    <group id="jsonmaterialGroup" transform="#t_object1" material="json/flatgreen_material.json" visible="false">
        <mesh id="myMesh04" src="#simplePlane1"/>
    </group>
    
    <group id="xmlmaterialGroup" transform="#t_object1" material="xml/materials.xml#flatgreen2" visible="false">
        <mesh id="myMesh05" src="#simplePlane1"/>
    </group>

    <group id="jsonSequenceGroup" transform="#t_object1" visible="false">
      <mesh id="myMesh06" compute="position = xflow.lerpSeq(position, key)" >
        <data src="json/sequence.json" />
        <float name="key" >1.5</float>
      </mesh>
    </group>
    
  </xml3d>

  <xml3d id="xml3dReference" width="320px" height="240px" xmlns="http://www.xml3d.org/2009/xml3d" style="background-color: #ccc">
	  <defs>
        <transform id="t_object1Ref1" translation="-3 2.5 0"/>
        <data id="simplePlaneRef1">
          <int id="indicesRef1" name="index">0 1 2 1 2 3</int>
          <float3 id="positionsRef1" name="position">-1.0 -1.0 -10.0 1.0 -1.0 -10.0 -1.0 1.0 -10.0 1.0 1.0 -10.0</float3>
          <float3 name="normal">0.0 0.0 1.0 0.0 0.0 1.0 0.0 0.0 1.0 0.0 0.0 1.0</float3>
          <float2 id="texcoordsRef1" name="texcoord">0.0 1.0 1.0 1.0 0.0 0.0 1.0 0.0</float2>
        </data>

        <material id="refFlatGreen" script="urn:xml3d:material:flat">
            <float3 name="diffuseColor">0 1 0</float3>
        </material>

        <material id="refWood" script="urn:xml3d:material:flat">
          <float3 name="diffuseColor">1 1 0</float3>
        </material>
        
	  </defs>
	<view  />
	<light />
    
    <group id="groupRef1" transform="#t_object1Ref1">
        <mesh type="triangles" src="#simplePlaneRef1"/>
    </group>
    
  </xml3d>

  <xml3d id="xml3dReference2" width="320px" height="240px" xmlns="http://www.xml3d.org/2009/xml3d" style="background-color: #ccc" >
    <defs>
        <transform id="t_object1Ref2" translation="-3 2.5 0" />
        <data id="simplePlaneRef2">
            <int id="indicesRef2" name="index">0 1 2 1 2 3</int>
            <float3 id="positionsRef2" name="position">1 -3 -10.0  3 -3 -10.0  1 -1 -10.0 3 -1 -10.0</float3>
            <float3 name="normal">0.0 0.0 1.0 0.0 0.0 1.0 0.0 0.0 1.0 0.0 0.0 1.0</float3>
            <float2 id="texcoordsRef2" name="texcoord">0.0 1.0 1.0 1.0 0.0 0.0 1.0 0.0</float2>
        </data>

    </defs>
    <view />
    <light />

    <group id="groupRef2" transform="#t_object1Ref2">
        <mesh type="triangles" src="#simplePlaneRef2"/>
    </group>
  
  </xml3d>


  <xml3d id="xml3dReference3" width="320px" height="240px" xmlns="http://www.xml3d.org/2009/xml3d" style="background-color: #ccc" >
    <defs>
      <transform id="t_object1Ref3" translation="-3 2.5 0" />

    </defs>
    <view />
    <light />

    <group id="groupRef3" transform="#t_object1Ref3">
      <mesh type="triangles" compute="position = xflow.lerpSeq(position, key)" >
        <int name="index">0 1 2 1 2 3</int>
        <float3 name="position" key="0" > 1 -3 -10.0    3 -3 -10.0    1 -1 -10.0   3 -1 -10.0</float3>
        <float3 name="position" key="1" >0 -3 -10.0    4 -3 -10.0    0 -1 -10.0   4 -1 -10.0</float3>
        <float3 name="position" key="2" >0 -4 -10.0    4 -4 -10.0    0 0 -10.0   4 0 -10.0</float3>
        <float name="key" >1.5</float>
      </mesh>
    </group>

  </xml3d>




</body>
</html>
